#set 256 colors
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
#Cursor shape
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'
# Source snapshot
source ~/.config/snapshot_tmuxline
#set -g status-bg default
#set -g status-fg colour246
# Use C-a instead of C-b as the prefix
set -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

# Terminal title
set -g set-titles on
set-option -g set-titles-string "tmux [ #I:#W ]"
#keys
set-option -gw xterm-keys on

# set default shell
#set -g default-command "exec /usr/bin/zsh"

set -g display-time 2000

# set vi style key binding
set -g status-keys vi
setw -g mode-keys vi

# tmux prefix + Escape starts copy mode.
bind Escape copy-mode 

# be more responsive, changing the default delay
set -sg escape-time 1

# set scrollback
set -g history-limit 10000

# Start numbering at 1
set-option -g base-index 1
set-window-option -g pane-base-index 1
# Enable mouse mode
set -g mouse on

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf  \; display "Reloaded!"

# automatic window renaming
set-window-option -g automatic-rename on

# aggresive resize
setw -g aggressive-resize on

# Saner splitting.
bind v split-window -h
bind s split-window -v
bind S choose-session

# move around panes with hjkl, as one would in vim after pressing ctrl-w
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Log output to a text file on demand
bind P pipe-pane -o "cat >>~/#W.log" \; display "Toggled logging to ~/#W.log"

# Disable "activity on window" message
set -g visual-activity off

# Smart pane switching with awareness of Vim splits.
# See: https://github.com/christoomey/vim-tmux-navigator
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n C-h if-shell "$is_vim" "send-keys C-h"  "select-pane -L"
bind-key -n C-j if-shell "$is_vim" "send-keys C-j"  "select-pane -D"
bind-key -n C-k if-shell "$is_vim" "send-keys C-k"  "select-pane -U"
bind-key -n C-l if-shell "$is_vim" "send-keys C-l"  "select-pane -R"
bind-key -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

#========================================================================================================

### Colours
##tm_yellow=colour03
#tm_gray=colour246
##tm_purple=colour05
##tm_black=colour00
##tm_green=colour10

## Status update interva#l
#set -g status-interval 1

## Basic status bar colors
#set -g status-fg $tm_gray
#set -g status-bg default

## Left side of status bar
#set -g status-left-bg default
#set -g status-left-fg $tm_gray
#set -g status-left-length 40
#set -g status-left "#[fg=$tm_gray,bg=default] #S #[fg=$tm_gray,bg=default]#[fg=$tm_gray,bg=default] #I:#P #[fg=$tm_gray,bg=default]"

## Right side of status bar
#set -g status-right-bg default
#set -g status-right-fg $tm_gray
#set -g status-right-length 150
#set -g status-right "#[fg=$tm_gray,bg=default]#[fg=$tm_gray,bg=default] %H:%M:%S #[fg=$tm_gray,bg=default]#[fg=$tm_gray,bg=default] %d-%b-%y #[fg=$tm_gray,bg=default]#[fg=$tm_gray,bg=default] #H "

## Window status alignment
#set -g status-justify centre
#set-window-option -g window-status-activity-attr none

#========================================================================================================
#set -g status-fg colour21
#set -g status-bg colour00

#set -g status-left-length 30
#set -g status-left '#[fg=colour00,bg=colour08,nobold] #S #[fg=colour08,bg=colour00,nobold]'

#set -g status-right '#(reattach-to-user-namespace tmux-airline #{client_width})'
#set -g status-right-length 150

#set -g window-status-format "#[fg=colour08,bg=colour00] #I  #W#[default]"
#set -g window-status-current-format "#[fg=colour00,bg=colour08] #[fg=colour00]#I  #W #[fg=colour08,bg=colour00,nobold]"

#set-window-option -g window-status-fg colour08
#set-window-option -g window-status-activity-attr none
#set-window-option -g window-status-bell-attr none
#set-window-option -g window-status-activity-fg yellow
#set-window-option -g window-status-bell-fg red
